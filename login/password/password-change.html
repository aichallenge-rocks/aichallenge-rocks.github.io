<div class="container" id="password-change">
    <div class="center-col">
        <h2>Restoring password</h2>
        <div ng-show="error || success" class="alert" ng-class="{'alert-success' : success, 'alert-danger': error}">{{message}}</div>
        <form name="form" ng-submit="form.$valid && passwordChange()" novalidate>
            <div class="form-group" ng-class="{'has-error': form.nickname.$invalid && form.nickname.edited}">
                <input type="text" ng-model="user.nickname" class="form-control input-lg" placeholder="Nickname or email" name="nickname" edited required>
                <div ng-show="form.nickname.edited">
                    <span class="help-block" ng-show="form.nickname.$error.required">Fill in nickname</span>
                </div>
            </div>
            <div class="form-group" ng-class="{'has-error': form.token.$invalid && form.token.edited}">
                <input type="text" ng-model="user.token" class="form-control input-lg" placeholder="Token" name="token" edited required>
                <div ng-show="form.token.edited">
                    <span class="help-block" ng-show="form.token.$error.required">Fill in token</span>
                </div>
            </div>

            <div class="form-group">
                <div ng-class="{'has-error': form.password.$invalid && form.password.edited}">
                    <div ng-show="form.password.edited">
                        <span class="help-block" ng-show="form.password.$error.required">Password can't be blank</span>
                        <span class="help-block" ng-show="form.password.$error.maxlength">Password length can't be more than 100 characters</span>
                    </div>
                    <input type="password" class="form-control input-lg" placeholder="New Password" data-ng-model="user.password" name="password" ng-maxlength="100" edited required>
                </div>
                <div ng-class="{'has-error': form.password.$valid && form.passwordConfirm.$invalid && form.passwordConfirm.edited}">
                    <input type="password" class="form-control input-lg" placeholder="Repeat password" data-ng-model="user.password_confirm" name="passwordConfirm" match="user.password" edited>
                    <div ng-show="form.passwordConfirm.edited && form.password.$valid">
                        <span class="help-block" ng-show="form.passwordConfirm.$error.mismatch">Check passwords for equality</span>
                    </div>
                </div>
            </div>

            <button type="submit" class="btn btn-primary btn-lg btn-block" ladda="isLoading" data-style="expand-right">Change password</button>
        </form>
    </div>
</div>
